samplers:
  rawElevation: &rawElevation
    dimensions: 2
    type: EXPRESSION
    expression: noise(x / elevationScale / globalScale, z / elevationScale / globalScale)^3
    variables:
      globalScale: $customization.yml:global-scale
      elevationScale: $customization.yml:elevation-scale
    samplers:
      noise:
        dimensions: 2
        type: TRANSLATE
        x: 10000
        z: 10000
        sampler:
          type: PROBABILITY
          sampler:
            type: FBM
            octaves: 6
            gain: 0.5
            lacunarity: 2.2
            sampler:
              type: OPEN_SIMPLEX_2
              frequency: 0.0003

  elevation:
    dimensions: 2
    type: EXPRESSION
    expression: |
      rawElevation(x, z)
      * if(factorContinental, herp(continents(x, z), continentZero, 0, continentFull, 1), 1)
      * if(factorSpawnIsland, herp(spawnIsland(x, z), 1, spawnIslandScale, -1, 1), 1)
      * if(factorRiver, (1-riverTerrainErosion(x, z)), 1)
    functions: $math/functions/interpolation.yml:functions
    variables:
      continentZero: $customization.yml:elevation-continental-flat-threshold
      continentFull: $customization.yml:elevation-continental-full-height-threshold
      factorContinental: $customization.yml:elevation-factor-continental
      factorRiver: $customization.yml:elevation-factor-rivers
      factorSpawnIsland: $customization.yml:elevation-factor-spawn-island
      spawnIslandScale: $customization.yml:elevation-spawn-island-scale
    samplers:
      rawElevation: *rawElevation
      continents: $math/samplers/continents.yml:samplers.continents
      spawnIsland: $math/samplers/spawnIsland.yml:samplers.spawnIsland
      riverTerrainErosion: $math/samplers/rivers.yml:samplers.riverTerrainErosion

  oceanElevation:
    dimensions: 2
    type: EXPRESSION
    expression: |
      herp(continents(x, z),
        continentZero, 0,
        continentFull, -1+rawElevation(x, z)
      )
    functions: $math/functions/interpolation.yml:functions
    variables:
      continentZero: 0
      continentFull: -0.8
    samplers:
      rawElevation: *rawElevation
      continents: $math/samplers/continents.yml:samplers.continents